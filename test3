new Tabulator("#modal_liste_lots", {
    data: lotsData,
    layout: "fitColumns",
    columns: [
        { title: "Lot", field: "Name" },
        { 
            title: "Version", 
            field: "Select", 
            editor: "list",   
            editorParams: function(cell){
                const options = cell.getValue().map(opt => ({
                    label: opt.version,  // affiché
                    value: opt.id        // valeur réelle
                }));

                // trouver la valeur sélectionnée
                const preselected = cell.getValue().find(opt => opt.selected);
                return {
                    values: options,
                    defaultValue: preselected ? preselected.id : null
                };
            },
            formatter: function(cell){
                const selectArr = cell.getValue();
                const preselected = selectArr.find(opt => opt.selected);
                return preselected ? preselected.version : "";
            }
        }
    ]
});